email subscription notes

1 hour PHP
make the userid behave like familyid in form and view!!
	can i do it with perms alone? nasty, but possible.


auugh. i need to know if this is an ADD or CHANGE
	BEFORE i decide whether to send it!
	compare it to what's in the subscription


??? PHP
actually do the emailing!
	then send it, to all in query
		if devsite, only send to ONE address: me
				perms!!! i have to fake the user? or perms?

??? SQL/python?/PHP?
this'll get ugly. i'll need special hacky things to add default subscriptions
	i.e... for news, parent ed, enhancement, all the springfest realms, etc
	for now, a nasty python or php hack

will need to handle deletions too



hmm. what about teachers? there's no place for their email address. dammit.
	maybe i should put some data for teachers in there.
	putting email addresses into users is brain-dead. needs to be in rasta




?? PHP
add hooks in new/update
	just async trigger the update!
		the audittrailid

??? PHP
how to call async emailing
look around for a good example
	shell_exec('nohup something')
	or, ignore_user_abort



format for email
	from: pacificacoop
	subject: NEWS/ALERT/NOTICE [subject/title]
	insert the regular content



??? PHP
the tricky bit is alerts. they have to be checked, somehow
	maybe those are manual
	or maybe i save status of who has been alerted?