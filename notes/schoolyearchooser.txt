schoolyear choooser notes



BUG
	the schoolyear is CHECKED before it is SAVED. 
	fucking a! this is html at its GODDAMNED worst



??? PHP
the most logical place for this is in the $top
	show it inside of the coopview? maybe in the header?
	no wait, it needs to be a global, for the purposes of CROSSLINKS!
		selectboxen
	or, maybe that can be a findTop() kind of thing
		will findtop ALWAYS work?
	when i flip back and forth i'll need to store/recover storevars too
		it'll stay with the top-level object/table

2 hours PHP
	everywhere i dick with schoolyear (mostly coopobject?), s/=/like/g
		in all linkconstraints, basically
	test and make sure this works
	i need to change all the if perms<year! i *always* want to check year
		so the user can constrain

??? PHP
in details, some details will need to be default ALL, not default this year
	 company, family, leads(people)


1 hour PHP
test EVERYTHING


???? PHP
	interesting brain-death. in search, i want to know what's already there
		in entry, i *may* want to enter for all possible years
	HOW thefuck can i do that? generate list of years dating back to... when?


???
	now, globalise it!
		in coopview and/or generic
		use the schoolyear in the chooser, not the one in currentschoolyear?
			or, store this thing in page somewhere instead? chosenschoolyear?

	
	WHERE does this global belong?
		page?
		view? ($top?)
		page->savedvars?



	ok. i think it's easy. i create a schoolyear GLOBAL, at the top
		it is only shown if yearlevel > whatever is target (view/edit/etc)
		i check it, in view, other places
		i save/restore it from session, and use save/restored version 
			i.e. it sets itself from $cp->vars
			it's its own weirdo form, so it can only work with view then
			BUT, it may be checked by CoopForm/View/Object
		update any other weirdo chooser i have, to user $cp->vars
			i.e. the chooser in carriereport, or in enhancement
		make sure it maintains state		
			state will go with the TABLE, in page->vars
		have a look through the objects, for linkconstraints
			be sure the linkconstraints will work now
		NOTE duplication between what we're doing here and defaultconstraints
			perhaps i shouldn't be putting this shit in coopview:find?
				it may belong in defaultconstraints instead
		ah. do NOT need a custom element. 
			just a custom way of generating selectoptions	
		cache the thing.
		handling it as a global is gonna be ugly
			when choosing reports, make set schoolyear = getparent's sy!
				which should be set thru the popup



clean up the shit in solicit summary, make it more generic
	i.e. try it in generic!

add an optional $all flag to the schoolyearchooseroptions
	unshift '%' => 'ALL' to it
